{"ast":null,"code":"import _slicedToArray from\"/Users/jjmerri/workspace/fifty-fifty-token/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useImperativeHandle}from'react';import PropTypes from'prop-types';import{throttle}from'lodash';var ScrollReveal=React.forwardRef(function(props,ref){var _useState=useState(window.innerHeight),_useState2=_slicedToArray(_useState,2),viewportHeight=_useState2[0],setViewportheight=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),revealEl=_useState4[0],setRevealel=_useState4[1];var checkComplete=function checkComplete(){return revealEl.length<=document.querySelectorAll('[class*=reveal-].is-revealed').length;};var elementIsVisible=function elementIsVisible(el,offset){return el.getBoundingClientRect().top<=viewportHeight-offset;};var revealElements=function revealElements(){if(checkComplete())return;var _loop=function _loop(i){var el=revealEl[i];var revealDelay=el.getAttribute('data-reveal-delay');var revealOffset=el.getAttribute('data-reveal-offset')?el.getAttribute('data-reveal-offset'):'200';var listenedEl=el.getAttribute('data-reveal-container')?el.closest(el.getAttribute('data-reveal-container')):el;if(elementIsVisible(listenedEl,revealOffset)&&!el.classList.contains('is-revealed')){if(revealDelay&&revealDelay!==0){setTimeout(function(){el.classList.add('is-revealed');},revealDelay);}else{el.classList.add('is-revealed');}}};for(var i=0;i<revealEl.length;i++){_loop(i);}};useImperativeHandle(ref,function(){return{init:function init(){setRevealel(document.querySelectorAll('[class*=reveal-]'));}};});useEffect(function(){if(typeof revealEl!=='undefined'&&revealEl.length>0){if(!checkComplete()){window.addEventListener('scroll',handleScroll);window.addEventListener('resize',handleResize);}revealElements();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[revealEl]);var handleListeners=function handleListeners(){if(!checkComplete())return;window.removeEventListener('scroll',handleScroll);window.removeEventListener('resize',handleResize);};var handleScroll=throttle(function(){handleListeners();revealElements();},30);var handleResize=throttle(function(){setViewportheight(window.innerHeight);},30);useEffect(function(){handleListeners();revealElements();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewportHeight]);return/*#__PURE__*/React.createElement(React.Fragment,null,props.children());});ScrollReveal.propTypes={children:PropTypes.func.isRequired};export default ScrollReveal;","map":{"version":3,"sources":["/Users/jjmerri/workspace/fifty-fifty-token/src/utils/ScrollReveal.js"],"names":["React","useState","useEffect","useImperativeHandle","PropTypes","throttle","ScrollReveal","forwardRef","props","ref","window","innerHeight","viewportHeight","setViewportheight","revealEl","setRevealel","checkComplete","length","document","querySelectorAll","elementIsVisible","el","offset","getBoundingClientRect","top","revealElements","i","revealDelay","getAttribute","revealOffset","listenedEl","closest","classList","contains","setTimeout","add","init","addEventListener","handleScroll","handleResize","handleListeners","removeEventListener","children","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport { throttle } from 'lodash';\n\nconst ScrollReveal = React.forwardRef((props, ref) => {\n\n  const [viewportHeight, setViewportheight] = useState(window.innerHeight); \n  const [revealEl, setRevealel] = useState([]);\n\n  const checkComplete = () => {\n    return revealEl.length <= document.querySelectorAll('[class*=reveal-].is-revealed').length;\n  };\n\n  const elementIsVisible = (el, offset) => {\n    return (el.getBoundingClientRect().top <= viewportHeight - offset);\n  };\n\n  const revealElements = () => {\n    if (checkComplete()) return;\n    for (let i = 0; i < revealEl.length; i++) {\n      let el = revealEl[i];\n      let revealDelay = el.getAttribute('data-reveal-delay');\n      let revealOffset = (el.getAttribute('data-reveal-offset') ? el.getAttribute('data-reveal-offset') : '200');\n      let listenedEl = (el.getAttribute('data-reveal-container') ? el.closest(el.getAttribute('data-reveal-container')) : el);\n      if (elementIsVisible(listenedEl, revealOffset) && !el.classList.contains('is-revealed')) {\n        if (revealDelay && revealDelay !== 0) {\n          setTimeout(function () {\n            el.classList.add('is-revealed');\n          }, revealDelay);\n        } else {\n          el.classList.add('is-revealed');\n        }\n      }\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    init() {\n      setRevealel(document.querySelectorAll('[class*=reveal-]'));\n    }\n  }));  \n\n  useEffect(() => {\n    if (typeof revealEl !== 'undefined' && revealEl.length > 0) {\n      if (!checkComplete()) {\n        window.addEventListener('scroll', handleScroll);\n        window.addEventListener('resize', handleResize);\n      }\n      revealElements();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [revealEl]);\n\n  const handleListeners = () => {\n    if (!checkComplete()) return;\n    window.removeEventListener('scroll', handleScroll);\n    window.removeEventListener('resize', handleResize);\n  };\n\n  const handleScroll = throttle(() => {\n    handleListeners();\n    revealElements();\n  }, 30);\n\n  const handleResize = throttle(() => {\n    setViewportheight(window.innerHeight);\n  }, 30);\n\n  useEffect(() => {\n    handleListeners();\n    revealElements();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewportHeight]);  \n\n  return (\n    <>\n      {props.children()}\n    </>\n  );\n});\n\nScrollReveal.propTypes = {\n  children: PropTypes.func.isRequired\n};\n\nexport default ScrollReveal;"]},"metadata":{},"sourceType":"module"}